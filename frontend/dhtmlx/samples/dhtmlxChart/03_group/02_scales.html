<!DOCTYPE html>
<html>
<head>
    <title>Scales and grouping</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <link href="../../../codebase/fonts/font_roboto/roboto.css" rel="stylesheet" type="text/css"/>
    <link href="../../../codebase/dhtmlx.css" rel="stylesheet" type="text/css"/>
    <script src="../../../codebase/dhtmlx.js"></script>
    <script src="../common/companies.js"></script>
    <script>
        var myBarChart;

        function doOnLoad() {
            myBarChart = new dhtmlXChart({
                view: "bar",
                container: "chart_container",
                value: "#sales#",
                preset: "alpha",
                yAxis: {},
                xAxis: {
                    template: "#id#"
                },
                label: "#sales#",
                sort: {
                    by: "#id#",
                    as: "string",
                    dir: "asc"
                },
                group: {
                    by: "#year#",
                    map: {
                        sales: ["#sales#", "sum"]
                    }
                }
            });
            myBarChart.parse(data, "json");
        }

        function groupA() {
            myBarChart.group({
                by: "#company#",
                map: {
                    sales: ["#sales#", "sum"]
                }
            });
        }

        function groupB() {
            myBarChart.group({
                by: "#year#",
                map: {
                    sales: ["#sales#", "sum"]
                }
            });
        }

        function groupC() {
            myBarChart.group({
                by: "#year#",
                map: {
                    sales: ["#sales#", "max"]
                }
            });
        }

        function sort(direction) {
            myBarChart.define("sort", {
                by: "#sales#",
                dir: direction,
                as: "int"
            });
            myBarChart.render();
        }
    </script>
</head>
<body onload="doOnLoad();">
<p>To update configuration properties after grouping you need to call define() method with new settings.</p>
<div id="chart_container" style="width:600px;height:250px;border:1px solid #c0c0c0;"></div>
<br/>
<input name="some_name" onclick="window['group'+document.getElementById('groupby').value]()" type="button"
       value="Group by">
<select id="groupby" name="groupby">
    <option value="A">company</option>
    <option SELECTED value="B">year (total sales)</option>
    <option value="C">year (max sales)</option>
</select><br/><br/>
<input name="some_name" onclick="sort(document.getElementById('dir').value)" type="button" value="Sort by sales">
<select id="dir" name="dir">
    <option selected value="asc">asc</option>
    <option value="desc">desc</option>
</select>
</body>
</html>
